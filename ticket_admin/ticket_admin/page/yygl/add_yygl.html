<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <title>狮子城-票务系统</title>
    <!-- TopJUI框架样式 -->
<link type="text/css" href="../../topjui/themes/default/topjui.core.min.css" rel="stylesheet">
<link type="text/css" href="../../topjui/themes/default/topjui.blue.css" rel="stylesheet" id="dynamicTheme"/>
<!-- FontAwesome字体图标 -->
<link type="text/css" href="../../static/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet"/>
<!-- layui框架样式 -->
<link type="text/css" href="../../static/plugins/layui/css/layui.css" rel="stylesheet"/>
<link type="text/css" href="../../topjui/css/style.css" rel="stylesheet">
<link type="text/css" href="../../static/plugins/bootstrap/css/bootstrap.min.css">
    <!-- jQuery相关引用 -->
<script type="text/javascript" src="../../static/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../static/plugins/jquery/jquery.cookie.js"></script>
<!-- TopJUI框架配置 -->
<script type="text/javascript" src="../../static/public/js/topjui.config.js"></script>
<!-- TopJUI框架核心-->
<script type="text/javascript" src="../../topjui/js/topjui.core.min.js"></script>
<!-- TopJUI中文支持 -->
<script type="text/javascript" src="../../topjui/js/locale/topjui.lang.zh_CN.js"></script>
<!-- layui框架js -->
<script type="text/javascript" src="../../static/plugins/layui/layui.js" charset="utf-8"></script>
<script type="text/javascript" src="../../static/public/js/jquery.easyui.min.js"></script>
</head>
<body>
    <div class="page-content ticket" style="padding:5px;">
    <h3>填写客户信息</h3>
    <form class="layui-form layui-form-pane" action="">
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left:0;">
                <span class="layui-title">团体名称:</span>
                <input type="text" name="" placeholder="" class="text_add2" style="margin-left: 10px;">
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left:0;">
                <span class="layui-title">团体编号:</span>
                <p style="height:38px;line-height:38px;width: 173px;margin-left:10px;">000222</p>
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span  class="layui-title">联系人:</span>
                <input type="text" name="" placeholder="" class="text_add2" style="margin-left: 10px;">
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span  class="layui-title">客户类型:</span>
                <p style="height:38px;line-height:38px;width:173px;margin-left:10px;">团体旅行社</p>
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span class="layui-title">联系电话:</span>
                <input type="text" name="" placeholder="" class="text_add2" style="margin-left: 10px;;">
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span class="layui-title">公司电话:</span>
                <!-- <input type="text" name="" placeholder="" class="text_add"> -->
                <p style="height:38px;line-height:38px;width:173px;margin-left:10px;">0752-2898788</p>
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span class="layui-title">预订员:</span>
                <input type="text" name="" placeholder="" class="text_add2" style="margin-left: 10px;">
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span  class="layui-title">游览日期:</span>
                <div style="margin-left:10px;">
                    <input type="text" name="" class="text_add2" id="starDate" style="width:30%;"> ~ <input type="text" name="" class="text_add2" id="endDate" style="width:30%;">
                </div>
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span class="layui-title" style="margin-right:10px;">支付方式:</span>
                <select lay-filter="aihao">
                    <option value="1">挂账</option>
                    <option value="2">预付款</option>
                    <option value="2">其他</option>
                </select>
            </div>
        </div>
        <div class="layui-form-item mb-2" style="width:45%;">
            <div class="layui-input-block" style="margin-left: 0;">
                <span class="layui-title">备注:</span>
                <input type="text" name="" placeholder="" class="text_add2" style="margin-left: 10px;">
            </div>
        </div>
    </form>
    <div style="clear: both;"></div>
</div>
<div class="ticket" style="padding:0 5px;">
    <h3>选择要预订的门票</h3>
    <div style="display: flex;margin-top:5px;">
        <div style="width: 25%;">
            <form class="layui-form layui-form-pane" action="" style="display:flex;align-items:center;">
                <input type="text" class="text_add3" step="width:125px">
                <button type="button" class="layui-btn layui-btn-primary" style="margin-left:5px;">定位</button> 
            </form>
            <div class="dataList">
                加载数据中...
            </div>
        </div>
        <div style="width: 75%;">
          <div class="allBtn" style="height:38px;line-height:38px;margin-left:20px;">
            已选:0类票，合计:0张，订单金额:0元
          </div>
          <table class="layui-hide" id="yygl_add1" lay-filter="test"></table>
        </div>
    </div>
</div>
    <script src="../../static/plugins/layui/layui.js" charset="utf-8"></script>
    
    
    
    
    <!-- 团体预约策略 -->
    
    
    
    
    
    
    <!-- 预约管理 -->
    
    
        <script>
 layui.use(['laydate','layer', 'form', 'table'], function(){
        var laydate = layui.laydate
        ,layer =layui.layer
        ,from = layui.form
        ,table = layui.table;
        
        // 开始时间 star
        laydate.render({
            elem: '#CheckInStar'
        });

        // 结束时间 star
        laydate.render({
            elem: '#leaveStar'
        });

        // 预约管理
        $('#piaolei_add').on('click', function () {
            layer.open({
                type: 2,
                title: '预约单-创建',
                maxmin: true,
                shadeClose: true,
                area: ['900px', '600px'],
                content: 'add_yygl.html',
                // content: $('#dingdan_content'),
                btn: ['保存', '取消']
            });
        });

        // 预约单查看详情
        $('#piaolei_add1').on('click', function () {
            layer.open({
                type: 2,
                title: '预约单-查看详情',
                maxmin: true,
                shadeClose: true,
                area: ['900px', '600px'],
                content: 'content_yygl.html',
                // content: $('#dingdan_content'),
                // btn: ['保存', '取消']
            });
        });
        
        // 预约管理
        table.render({
            elem: '#yygl_02'
            ,height: 700
            ,title: '订单信息'
            ,url: '../../json/table/yygl_02.json'
            ,page: true
            ,autoSort: false
            ,toolbar: false
            // ,toolbar: '#toolbarDemo'
            ,cols: [[
            {type: 'checkbox', title:'选择', fixed: 'left'}
            ,{field:'ddh', title:'订单号', width:150}
            ,{field:'ttmc', title:'团体名称', width:120}
            ,{field:'sl', title:'数量', width:60}
            ,{field:'ddje', title:'订单金额', width:100}
            ,{field:'lxr', title:'联系人', width:80}
            ,{field:'dh', title:'电话', width:120}
            ,{field:'yldeta', title:'游览起止日期', width:200}
            ,{field:'ddzt', title:'订单状态', width:100}
            ,{field:'cjr', title:'创建人', width:80}
            ,{field:'qcrq', title:'创建日期', width:120}
            ,{field:'fkfs', title:'付款方式', width:100}
            ,{field:'ydy', title:'预订员', width:80}
            // ,{fixed:'right', title:'操作', toolbar: '#barDemo', width:100}
            ]]
        });

        // 预约单创建
        table.render({
            elem: '#yygl_add1'
            ,height: 245
            ,title: '预约单-创建'
            ,url: '../../json/table/yygl_add02.json'
            ,page: false
            ,autoSort: false
            ,toolbar: false
            // ,toolbar: '#toolbarDemo'
            ,cols: [[
            {type: 'checkbox', title:'状态', fixed: 'left'}
            ,{field:'plname', title:'票类名称', width:200}
            ,{field:'shuliang', title:'数量', width:80}
            ,{field:'yuanjia', title:'原价', width:100}
            ,{field:'yhj', title:'优惠价', width:80}
            ,{field:'xj', title:'小计', width:80}
            ]]
        });

        // 订单跟踪信息
        table.render({
            elem: '#yygl_ddgzxx'
            ,height: 150
            ,title: '订单跟踪信息'
            ,url: '../../json/table/yygl_ddgzxx.json'
            ,page: false
            ,autoSort: false
            ,toolbar: false
            // ,toolbar: '#toolbarDemo'
            ,cols: [[
            {field:'cztime', title:'操作时间', width:150}
            ,{field:'plname', title:'处理信息', width:150}
            ,{field:'shuliang', title:'操作人', width:150}
            ]]
        });

        // 订单明细
        table.render({
            elem: '#yygl_ddmx'
            ,height: 150
            ,title: '订单明细'
            ,url: '../../json/table/yygl_ddmx.json'
            ,page: false
            ,autoSort: false
            ,toolbar: false
            // ,toolbar: '#toolbarDemo'
            ,cols: [[
            {field:'mpname', title:'门票名称', width:200}
            ,{field:'yuanjia', title:'原价', width:100}
            ,{field:'ssj', title:'实售价', width:100}
            ,{field:'shuliang', title:'数量', width:100}
            ,{field:'xj', title:'小计', width:100}
            ]]
        });
    
        //工具栏事件
        table.on('toolbar(test)', function (obj) {
        var checkStatus = table.checkStatus(obj.config.id);
            switch (obj.event) {
                case 'add':
                layer.msg('添加');
                break;
                case 'edit':
                layer.msg('编辑');
                break;
                case 'del':
                layer.msg('删除');
                break;
                case 'lf_zhengjia':
                var data = checkStatus.data;
                layer.alert(JSON.stringify(data));
                break;
            };
        });
    
        //监听单元格编辑
        table.on('edit(test)', function (obj) {
        var value = obj.value //得到修改后的值
            , data = obj.data //得到所在行所有键值
            , field = obj.field; //得到字段
            console.log(obj)
        });
    
        //监听行工具事件
        table.on('tool(test)', function (obj) {
        var data = obj.data;
        //console.log(obj)
        if (obj.event === 'del') {
            layer.confirm('真的删除行么', function (index) {
            obj.del();
            layer.close(index);
            });
        } else if (obj.event === 'edit') {
            //页面层-自定义
            layer.open({
                type: 2,
                title: '修改景区信息',
                area: ['500px', '400px'],
                // content: $('#jbxx4_edit'),
                content: 'yygl_edit.html',
                btn: ['提交', '取消']
            });
        }
        });
                        
        // $('i').on('click', function () {
        //     var type = $(this).data('type');
        //     active[type] ? active[type].call(this) : '';
        // });
        // $('.layui-btn').on('click', function () {
        //     var type = $(this).data('type');
        //     active[type] ? active[type].call(this) : '';
        // });
    
    });
</script>
<script>
    layui.config({
      base: '../../static/plugins/selectPlus/'
    }).extend({
      test: 'selectPlus'
    }).use(['selectPlus', 'jquery'], function () {
      var $ = layui.$,
        selectPlus = layui.selectPlus;
      
      // 是否需要导览
      var test = selectPlus.render({
        el: '#daolan',
        url: '../../json/selectplus/daolan.json',
        parseData: function (res) {
          return res.data;
        },
        valueName: "name",
        values: ['', ''],
        valueSeparator: " , "
      });

      // 订单状态
      var test1 = selectPlus.render({
        el: '#ddzt',
        url: '../../json/selectplus/ddzt.json',
        parseData: function (res) {
            return res.data;
        },
        valueName: "name",
        values: ['', ''],
        valueSeparator: " , "
      });
  
      var obj = test.getChecked();
      var obj1 = test1.getChecked();
      console.log(obj);
    })
  </script>
    
    <!-- 客户关系管理 -->
    
    
    
    
    
</body>
</html>